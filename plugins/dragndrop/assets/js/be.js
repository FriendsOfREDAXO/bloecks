bloecks.addPlugin("dragndrop",{init:function(){var a=this;$(".rex-slices").each(function(b,c){try{$(c).sortable("destroy")}catch(a){}$(c).find(".rex-slice.rex-slice-edit").length||a.addSortables(c)})},markDisabledItems:function(a,b){b="string"!=typeof b?"ui-state-disabled":b,$(a).find(".rex-slice-output:not(."+b+")").each(function(a,c){$(c).find('[href*="direction=move"]').length||$(c).addClass(b)})},addSortables:function(a){var b="ui-state-disabled";this.markDisabledItems(a,b),$(a).sortable({appendTo:document.body,handle:".panel-heading",placeholder:"rex-slice rex-slice-placeholder",cancel:b,containment:$(a),items:">.rex-slice.rex-slice-output",start:function(a,b){$(this).addClass("ui-state-sorting"),b.placeholder.css({height:b.item.outerHeight(),width:b.item.outerWidth()-1})},stop:function(a,b){$(this).hasClass("ui-state-updated")||$(this).removeClass("ui-state-sorting")},update:function(a,b){$(this).addClass("ui-state-updated");var c=bloecks.getSliceId(b.item),d=b.item.prevAll(".rex-slice.rex-slice-output").length?bloecks.getSliceId(b.item.prevAll(".rex-slice.rex-slice-output").first()):0;if(null!==c&&null!==d){console.log("Update prio of "+c+" and move it after "+d);var e=window.location.href.replace(/page=([^&]+)/,"page=bloecks/dragndrop/move").replace(/(&|\?)move[(\d+)][prev]=(\d+)/g,"");e+=(e.indexOf("?")>-1?"&":"?")+"move["+c+"][prev]="+d,bloecks.executePjax(e)}}})}});
//# sourceMappingURL=be.js.map