{"version":3,"sources":["../../assets_src/js/be/scripts.js"],"names":[],"mappings":"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","file":"be.js","sourcesContent":["bloecks.addPlugin('dragndrop', {\n    init: function() {\n        // Verwende const für unveränderliche Variablen\n        const _this = this;\n        \n        // Durchlaufe alle rex-slices Container, die nicht unverschiebbar sind\n        $('.rex-slices:not(.is--undraggable)').each(function(i, slicewrapper) {\n            // Entferne jegliche Sortierbarkeit\n            try {\n                $(slicewrapper).sortable('destroy');\n            } catch (ev) { /* Ignoriere Fehler */ }\n\n            if (!$(slicewrapper).find('.rex-slice.rex-slice-edit, .rex-slice.rex-slice-add').length) {\n                // Füge Sortierbarkeit hinzu, wenn die Seite nicht im Bearbeitungsmodus ist\n                _this.addSortables(slicewrapper);\n            } else {\n                $(slicewrapper).addClass('is--editing');\n            }\n        });\n    },\n\n    markDisabledItems: function(slicewrapper, disabledClass = 'ui-state-disabled') {\n        // Markiere Elemente, die nicht verschoben werden können\n        $(slicewrapper).find('.rex-slice-output:not(.' + disabledClass + ')').each(function(j, slice) {\n            if (!$(slice).find('[href*=\"direction=move\"]').length) {\n                $(slice).addClass(disabledClass);\n            }\n        });\n    },\n\n    addSortables: function(slicewrapper) {\n        const disabledClass = 'ui-state-disabled';\n\n        this.markDisabledItems(slicewrapper, disabledClass);\n\n        $(slicewrapper).sortable({\n            appendTo: document.body,\n            handle: '.rex-page-section>.panel>.panel-heading',\n            placeholder: 'rex-slice rex-slice-placeholder',\n            cancel: '.' + disabledClass,\n            helper: 'clone',\n            items: '>.rex-slice.rex-slice-draggable',\n\n            create: function(event, ui) {\n                // Fixiere Wrapper-Höhe, um Seitensprünge zu vermeiden\n                $(slicewrapper).css({\n                    minHeight: $(slicewrapper).outerHeight()\n                });\n            },\n\n            start: function(event, ui) {\n                $(this).addClass('ui-state-sorting');\n                $(this).sortable('refreshPositions');\n                ui.placeholder.height(ui.helper.outerHeight());\n            },\n\n            stop: function(event, ui) {\n                if (!$(this).hasClass('ui-state-updated')) {\n                    $(this).removeClass('ui-state-sorting');\n                }\n            },\n\n            update: function(event, ui) {\n                $(this).addClass('ui-state-updated');\n                $(this).sortable('refresh');\n\n                const direction = ui.position.top < ui.originalPosition.top ? 'up' : 'down';\n                const this_id = bloecks.getSliceId(ui.item);\n                const prev_id = ui.item.prevAll('.rex-slice-draggable').length ? bloecks.getSliceId(ui.item.prevAll('.rex-slice-draggable').first()) : 0;\n\n                if (this_id !== null && prev_id !== null) {\n                    let url = ui.item.find(`[href*=\"direction=move${direction}\"]`).length ? ui.item.find(`[href*=\"direction=move${direction}\"]`).first().attr('href') : null;\n                    if (url !== null) {\n                        url = url.replace(/(&amp;|&)direction=move(up|down)/, `$1direction=move$2$1insertafter=${prev_id}`);\n                        url = url.replace(/content_move_slice/, \"content_move_slice_to\");\n                        url = url.replace(/_csrf_token=[^&]+/, `_csrf_token=${ui.item.data('csrf-token')}`);\n                        url += `#slice${this_id}`;\n                    } else {\n                        url = window.location.href;\n                    }\n\n                    bloecks.executePjax(url);\n                }\n            }\n        });\n    },\n});\n"]}