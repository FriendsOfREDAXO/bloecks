{"version":3,"sources":["../../assets_src/js/be/scripts.js"],"names":[],"mappings":"AAAA,OAAO,CAAC,SAAS,CAAC;AAClB,IAAI,CAAC,SAAS,EAAE;AAChB,IAAI,CAAC;AACL,QAAQ,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;AACzB,QAAQ,CAAC;AACT,YAAY,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;AAC7B,YAAY,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS;AAC5C,YAAY,IAAI,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,EAAE,WAAW,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;AACjF,YAAY,CAAC;AACb,gBAAgB,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ;AACtC,gBAAgB,GAAG,CAAC,CAAC;AACrB,oBAAoB,EAAE,YAAY,EAAE,QAAQ,EAAE,OAAO,GAAG;AACxD,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B;AACA,gBAAgB,EAAE,IAAI,YAAY,EAAE,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC;AACvG,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI;AACzE,oBAAoB,KAAK,CAAC,YAAY,CAAC,YAAY,EAAE;AACrD,gBAAgB,CAAC;AACjB,gBAAgB,IAAI;AACpB,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,YAAY,EAAE,QAAQ,EAAE,EAAE,EAAE,OAAO,GAAG;AAC5D,gBAAgB,CAAC;AACjB,YAAY,GAAG;AACf,QAAQ,EAAE;AACV;AACA,QAAQ,iBAAiB,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC;AACjE,QAAQ,CAAC;AACT,YAAY,aAAa,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;AACpG;AACA,YAAY,EAAE,YAAY,EAAE,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;AACzG,YAAY,CAAC;AACb,gBAAgB,EAAE,IAAI,KAAK,EAAE,IAAI,GAAG,IAAI,GAAG,SAAS,CAAC,IAAI,KAAK,MAAM,CAAC;AACrE,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;AAC1F,oBAAoB,EAAE,KAAK,EAAE,QAAQ,CAAC,aAAa,EAAE;AACrD,gBAAgB,CAAC;AACjB,YAAY,GAAG;AACf,QAAQ,EAAE;AACV;AACA,QAAQ,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC;AAC7C,QAAQ,CAAC;AACT,YAAY,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE;AACpD;AACA,YAAY,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,aAAa,EAAE;AAChE;AACA,YAAY,EAAE,YAAY,EAAE,QAAQ,EAAE;AACtC,gBAAgB,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;AACxC,gBAAgB,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE;AAClE,gBAAgB,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE;AAC/D,gBAAgB,MAAM,CAAC,CAAC,aAAa,CAAC;AACtC,gBAAgB,EAAE,CAAC,WAAW,CAAC,CAAC,EAAE,YAAY,EAAE;AAChD,gBAAgB,MAAM,CAAC,CAAC,CAAC,KAAK,EAAE;AAChC,gBAAgB,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE;AACzD;AACA,gBAAgB,MAAM,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;AAC5C,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK;AAC7D,oBAAoB,EAAE,YAAY,EAAE,GAAG,EAAE;AACzC,wBAAwB,SAAS,CAAC,CAAC,EAAE,YAAY,EAAE,WAAW,EAAE;AAChE,oBAAoB,GAAG;AACvB,gBAAgB,EAAE;AAClB;AACA,gBAAgB,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;AAC3C,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG;AACzD;AACA,oBAAoB,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI;AAC7E,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,gBAAgB,GAAG;AACzD;AACA,oBAAoB,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;AACxE,oBAAoB,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,WAAW,IAAI;AACnE,gBAAgB,EAAE;AAClB;AACA,gBAAgB,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;AAC1C,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,IAAI,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG;AAC7D,oBAAoB,CAAC;AACrB,wBAAwB,EAAE,IAAI,EAAE,WAAW,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG;AAChE,oBAAoB,CAAC;AACrB,gBAAgB,EAAE;AAClB;AACA,gBAAgB,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;AAC5C,gBAAgB,CAAC;AACjB,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG;AACzD;AACA,oBAAoB,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI;AACzE,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,GAAG;AAChD;AACA,oBAAoB,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;AAC9F;AACA,oBAAoB,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,EAAE;AAC9D,wBAAwB,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3J;AACA,oBAAoB,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;AAC5D,oBAAoB,CAAC;AACrB,wBAAwB,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE;AAChG;AACA,wBAAwB,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,KAAK,GAAG,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;AAC3L,wBAAwB,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;AACxC,wBAAwB,CAAC;AACzB,4BAA4B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE;AAChI,4BAA4B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,kBAAkB,EAAE,CAAC,CAAC,qBAAqB,GAAG;AAC7F,4BAA4B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,QAAQ,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,IAAI;AAChH,4BAA4B,GAAG,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AACtD,wBAAwB,CAAC;AACzB,wBAAwB,IAAI;AAC5B,wBAAwB,CAAC;AACzB,4BAA4B,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AACvD,wBAAwB,CAAC;AACzB;AACA,wBAAwB,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE;AACzC;AACA,wBAAwB,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE;AACjD,oBAAoB,CAAC;AACrB,gBAAgB,CAAC;AACjB,YAAY,GAAG;AACf,QAAQ,EAAE;AACV,IAAI,CAAC;AACL,EAAE","file":"be.js","sourcesContent":["bloecks.addPlugin(\n    'dragndrop',\n    {\n        init : function()\n        {\n            var _this = this;\n            // for each rex-slices container\n            $('.rex-slices:not(.is--undraggable)').each(function(i, slicewrapper)\n            {\n                // remove any sortable\n                try {\n                    $(slicewrapper).sortable('destroy');\n                } catch(ev) { }\n\n                if(!$(slicewrapper).find('.rex-slice.rex-slice-edit, .rex-slice.rex-slice-add').length)\n                {\n                    // only add sortables if the page is not in EDIT mode\n                    _this.addSortables(slicewrapper);\n                }\n                else\n                {\n                    $(slicewrapper).addClass('is--editing');\n                }\n            });\n        },\n\n        markDisabledItems : function(slicewrapper, disabledClass)\n        {\n            disabledClass = typeof(disabledClass) != 'string' ? 'ui-state-disabled' : disabledClass;\n\n            $(slicewrapper).find('.rex-slice-output:not(.' + disabledClass + ')').each(function(j, slice)\n            {\n                if(!$(slice).find('[href*=\"direction=move\"]').length)\n                {\n                    // we won't let the user move items that cannot be moved by perms etc.\n                    $(slice).addClass(disabledClass);\n                }\n            });\n        },\n\n        addSortables : function(slicewrapper)\n        {\n            var disabledClass = 'ui-state-disabled';\n\n            this.markDisabledItems(slicewrapper, disabledClass);\n\n            $(slicewrapper).sortable({\n                appendTo: document.body,\n                handle: '.rex-page-section>.panel>.panel-heading',\n                placeholder: 'rex-slice rex-slice-placeholder',\n                cancel: disabledClass,\n                // containment: $(slicewrapper),\n                helper: 'clone',\n                items: '>.rex-slice.rex-slice-draggable',\n\n                create: function (event, ui)\n                {\n                    // fix wrapper height to avoid page jumps\n                    $(slicewrapper).css({\n                        minHeight: $(slicewrapper).outerHeight()\n                    });\n                },\n\n                start : function(event, ui)\n                {\n                    $(this).addClass('ui-state-sorting');\n\n                    // refresh positions just to make sure everything is okay\n                    $(this).sortable('refreshPositions');\n\n                    // set placeholder height according to item (helper)\n                    ui.placeholder.height(ui.helper.outerHeight());\n                },\n\n                stop : function(event, ui)\n                {\n                    if(!$(this).hasClass('ui-state-updated'))\n                    {\n                        $(this).removeClass('ui-state-sorting');\n                    }\n                },\n\n                update : function(event, ui)\n                {\n                    $(this).addClass('ui-state-updated');\n\n                    // refresh items just to make sure everything is okay\n                    $(this).sortable('refresh');\n\n                    var direction = ui.position.top < ui.originalPosition.top ? 'up' : 'down';\n\n                    var this_id = bloecks.getSliceId(ui.item),\n                        prev_id = ui.item.prevAll('.rex-slice-draggable').length ? bloecks.getSliceId(ui.item.prevAll('.rex-slice-draggable').first()) : 0;\n\n                    if(this_id !== null && prev_id !== null)\n                    {\n                        console.log('Move ' + this_id + ' ' + direction + ', after ' + prev_id);\n\n                        var url = ui.item.find('[href*=\"direction=move' + direction + '\"]').length ? ui.item.find('[href*=\"direction=move' + direction + '\"]').first().attr('href') : null;\n                        if(url !== null)\n                        {\n                            url = url.replace(/(&amp;|&)direction=move(up|down)/, \"$1direction=move$2$1insertafter=\" + prev_id);\n                            url = url.replace(/content_move_slice/, \"content_move_slice_to\");\n                            url = url.replace(/_csrf_token=[^&]+/, \"_csrf_token=\" + ui.item.data('csrf-token'));\n                            url += '#slice' + this_id;\n                        }\n                        else\n                        {\n                            url = window.location.href;\n                        }\n\n                        console.log(url);\n\n                        bloecks.executePjax(url);\n                    }\n                }\n            });\n        },\n    }\n);\n"]}