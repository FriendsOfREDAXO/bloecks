var bloecks_code={init:function(){},insertLinebreakAtCursor:function(a){var b,c=a.value;if("undefined"!=typeof a.selectionStart&&"undefined"!=typeof a.selectionEnd){if(before=c.slice(0,a.selectionStart),matches=before.match(/(\n|^)(\t+|\s+)?[^\n]+$/),console.log(matches),matches&&"undefined"!=typeof matches[2])return this.insertTextAtCursor(a,"\n"+matches[2]),!1}else"undefined"!=typeof document.selection&&"undefined"!=typeof document.selection.createRange&&(a.focus(),b=document.selection.createRange(),b.collapse(!1),console.log("RANGE"),console.log(b),b.select());return!0},jumpToPreviousTab:function(a){var b,c=a.value;"undefined"!=typeof a.selectionStart&&"undefined"!=typeof a.selectionEnd?(before=c.slice(0,a.selectionStart),matches=before.match(/(\n|^)(.*)[^\n]+$/),console.log(matches)):"undefined"!=typeof document.selection&&"undefined"!=typeof document.selection.createRange&&(a.focus(),b=document.selection.createRange(),b.collapse(!1),console.log("RANGE"),console.log(b),b.select())},insertTextAtCursor:function(a,b){var c,d,e=a.value;"undefined"!=typeof a.selectionStart&&"undefined"!=typeof a.selectionEnd?(c=a.selectionEnd,a.value=e.slice(0,a.selectionStart)+b+e.slice(c),a.selectionStart=a.selectionEnd=c+b.length):"undefined"!=typeof document.selection&&"undefined"!=typeof document.selection.createRange&&(a.focus(),d=document.selection.createRange(),d.collapse(!1),d.text=b,d.select())}};$(document).on("ready.bloecks",$.proxy(bloecks_code.init,bloecks_code));var bloecks_fragments={init:function(){console.log("fragments"),this.addToggleButtons()},addToggleButtons:function(){$(document).on({"change.bloecks":function(a){bloecks_fragments.toggle(this)}},'.bloecks--setting input[type="checkbox"][name*="[active]"]')},toggle:function(a){var b=$(a).is(":checked"),c=$(a).attr("id");b?$("."+c).removeClass("is--hidden"):$("."+c).addClass("is--hidden")}};$(document).on("ready.bloecks",$.proxy(bloecks_fragments.init,bloecks_fragments)),$(document).on("rex:ready",function(a){$('.bloecks--setting input[type="checkbox"][name*="[active]"]').each(function(a,b){bloecks_fragments.toggle(b)})});var bloecks={plugins:[],init:function(){for(var a=this.getPlugins(!0),b=a.length,c=0;c<b;c++)this[a[c]].init()},getSliceId:function(a){var b=null;return $(a).is(".rex-slice-output")||(a=$(a).parents(".rex-slice-output").length?$(a).parents(".rex-slice-output").first():1==$(a).find(".rex-slice-output").length?$(a).find(".rex-slice-output").first():null),a&&($(a).find('[href*="slice_id="]').length?b=parseInt($(a).find('[href*="slice_id="]').first().attr("href").replace(/.*slice_id=(\d+).*/,"$1")):$(a).attr("id")&&(b=parseInt($(a).attr("id").replace(/[^0-9]/g,"")))),b},executePjax:function(a){var b=a.match(/(#[^\?\&]+)/);b&&(a=a.replace(/(#[^\?\&]+)/,"")+b[0]),console.log("PJAXing "+a),$.pjax({url:a,container:"#rex-js-page-main-content",fragment:"#rex-js-page-main-content",push:!1})},getPlugins:function(a){return a=a===!0,this.plugins.filter(function(b){return"string"==typeof b&&"undefined"!=typeof bloecks[b]&&(!a||"function"==typeof bloecks[b].init)})},addPlugin:function(a,b,c){this[a]=b,c=parseInt(c),c=Math.max(isNaN(c)?0:c,this.plugins.length),c>this.plugins.length&&(this.plugins=this.plugins.concat(Array.apply(null,Array(c-this.plugins.length)))),this.plugins.splice(c,0,a)}};$(document).on("rex:ready",$.proxy(bloecks.init,bloecks));
//# sourceMappingURL=be.js.map